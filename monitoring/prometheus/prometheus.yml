# @format

# Prometheus Configuration
global:
  scrape_interval: 15s # How often to scrape targets
  evaluation_interval: 15s # How often to evaluate rules
  external_labels:
    cluster: "local-dev"
    environment: "development"

# Alertmanager configuration (optional)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#           - alertmanager:9093

# Load rules once and periodically evaluate them
rule_files:
  - "alerts.yml"

# Scrape configurations
scrape_configs:
  # Prometheus itself
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
        labels:
          service: "prometheus"

  # Node Exporter - System metrics
  - job_name: "node-exporter"
    static_configs:
      - targets: ["node-exporter:9100"]
        labels:
          service: "node-exporter"
          instance: "local-machine"

  # cAdvisor - Container metrics
  - job_name: "cadvisor"
    static_configs:
      - targets: ["cadvisor:8080"]
        labels:
          service: "cadvisor"
          instance: "local-docker"

  # Your Next.js application (if it exposes metrics)
  # Uncomment and adjust when you add metrics to your app
  # - job_name: 'nextjs-app'
  #   static_configs:
  #     - targets: ['host.docker.internal:3000']
  #       labels:
  #         service: 'nextjs'
  #         environment: 'development'

  # AWS ECS metrics (when deployed)
  # This will be configured differently in production
  # - job_name: 'ecs-tasks'
  #   ec2_sd_configs:
  #     - region: eu-west-1
  #       port: 9090
